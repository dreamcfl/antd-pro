(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(W){W.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},5482:function(W,K,i){"use strict";i.r(K),i.d(K,{default:function(){return rt}});var nt=i(18106),z=i(51752),at=i(34792),H=i(48086),Z=i(11849),B=i(3182),Y=i(2824),st=i(17462),ue=i(76772),ce=i(94043),C=i.n(ce),N=i(28991),l=i(67294),fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ge=fe,J=i(27029),Q=function(r,t){return l.createElement(J.Z,(0,N.Z)((0,N.Z)({},r),{},{ref:t,icon:ge}))};Q.displayName="LockOutlined";var X=l.forwardRef(Q),de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"mobile",theme:"outlined"},pe=de,q=function(r,t){return l.createElement(J.Z,(0,N.Z)((0,N.Z)({},r),{},{ref:t,icon:pe}))};q.displayName="MobileOutlined";var me=l.forwardRef(q),ve=i(89366),it=i(84305),he=i(69224),ye=i(5894),be=i(94237),ot=i(32384),Oe=["logo","message","title","subTitle","actions","children"];function k(){return k=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},k.apply(this,arguments)}function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function je(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?_(Object(t),!0).forEach(function(n){Pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Pe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function xe(e,r){if(e==null)return{};var t=Ce(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}function Ce(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Fe(e){var r=e.logo,t=e.message,n=e.title,a=e.subTitle,s=e.actions,d=e.children,g=xe(e,Oe),p=(0,be.YB)(),F=je({searchConfig:{submitText:p.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(I,E){return E.pop()},submitButtonProps:{size:"large",style:{width:"100%"}}},g.submitter),w=(0,l.useContext)(he.ZP.ConfigContext),T=w.getPrefixCls("pro-form-login"),c=function(I){return"".concat(T,"-").concat(I)},S=(0,l.useMemo)(function(){return r?typeof r=="string"?l.createElement("img",{src:r}):r:null},[r]);return l.createElement("div",{className:c("container")},l.createElement("div",{className:c("top")},n||S?l.createElement("div",{className:c("header")},S?l.createElement("span",{className:c("logo")},S):null,n?l.createElement("span",{className:c("title")},n):null):null,a?l.createElement("div",{className:c("desc")},a):null),l.createElement("div",{className:c("main")},l.createElement(ye.Z,k({isKeyPressSubmit:!0,submitter:F},g),t,d),s?l.createElement("div",{className:c("other")},s):null))}var Me=Fe,lt=i(9715),Se=i(82482),ut=i(57663),we=i(71577),ct=i(47673),Ee=i(4107),ee=i(64893),Ze=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"];function D(){return D=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},D.apply(this,arguments)}function te(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function re(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?te(Object(t),!0).forEach(function(n){Le(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Le(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ne(e,r,t,n,a,s,d){try{var g=e[s](d),p=g.value}catch(F){t(F);return}g.done?r(p):Promise.resolve(p).then(n,a)}function ae(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var s=e.apply(r,t);function d(p){ne(s,n,a,d,g,"next",p)}function g(p){ne(s,n,a,d,g,"throw",p)}d(void 0)})}}function Te(e,r){if(e==null)return{};var t=Ie(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}function Ie(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function G(e,r){return Ae(e)||De(e,r)||Ne(e,r)||Be()}function Be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ne(e,r){if(!!e){if(typeof e=="string")return se(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return se(e,r)}}function se(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function De(e,r){var t=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],a=!0,s=!1,d,g;try{for(t=t.call(e);!(a=(d=t.next()).done)&&(n.push(d.value),!(r&&n.length===r));a=!0);}catch(p){s=!0,g=p}finally{try{!a&&t.return!=null&&t.return()}finally{if(s)throw g}}return n}}function Ae(e){if(Array.isArray(e))return e}var Re=l.forwardRef(function(e,r){var t=(0,l.useState)(e.countDown||60),n=G(t,2),a=n[0],s=n[1],d=(0,l.useState)(!1),g=G(d,2),p=g[0],F=g[1],w=(0,l.useState)(),T=G(w,2),c=T[0],S=T[1],R=e.rules,I=e.name,E=e.phoneName,j=e.fieldProps,m=e.captchaTextRender,v=m===void 0?function(y,x){return y?"".concat(x," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:m,h=e.captchaProps,P=Te(e,Ze),f=function(){var y=ae(regeneratorRuntime.mark(function x(M){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,S(!0),u.next=4,P.onGetCaptcha(M);case 4:S(!1),F(!0),u.next=13;break;case 8:u.prev=8,u.t0=u.catch(0),F(!1),S(!1),console.log(u.t0);case 13:case"end":return u.stop()}},x,null,[[0,8]])}));return function(M){return y.apply(this,arguments)}}();return(0,l.useEffect)(function(){var y=0,x=e.countDown;return p&&(y=window.setInterval(function(){s(function(M){return M<=1?(F(!1),clearInterval(y),x||60):M-1})},1e3)),function(){return clearInterval(y)}},[p]),l.createElement(Se.Z.Item,{noStyle:!0,shouldUpdate:!0},function(y){var x=y.getFieldValue,M=y.validateFields;return l.createElement("div",{style:re(re({},j==null?void 0:j.style),{},{display:"flex",alignItems:"center"}),ref:r},l.createElement(Ee.Z,D({},j,{style:{flex:1,transition:"width .3s",marginRight:8}})),l.createElement(we.Z,D({style:{display:"block"},disabled:p,loading:c},h,{onClick:ae(regeneratorRuntime.mark(function U(){var u;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(b.prev=0,!E){b.next=9;break}return b.next=4,M([E].flat(1));case 4:return u=x([E].flat(1)),b.next=7,f(u);case 7:b.next=11;break;case 9:return b.next=11,f("");case 11:b.next=16;break;case 13:b.prev=13,b.t0=b.catch(0),console.log(b.t0);case 16:case"end":return b.stop()}},U,null,[[0,13]])}))}),v(p,a)))})}),ze=(0,ee.Z)(Re),ft=i(63185),He=i(9676),ke=i(33538),Ge=i(22270),$e=["options","fieldProps","proFieldProps","valueEnum"];function A(){return A=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},A.apply(this,arguments)}function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ve(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ie(Object(t),!0).forEach(function(n){Ue(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ue(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function We(e,r){if(e==null)return{};var t=Ke(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}function Ke(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}var Ye=l.forwardRef(function(e,r){var t=e.options,n=e.fieldProps,a=e.proFieldProps,s=e.valueEnum,d=We(e,$e);return l.createElement(ke.Z,A({ref:r,valueType:"checkbox",mode:"edit",valueEnum:(0,Ge.h)(s,void 0),fieldProps:Ve({options:t},n),proFieldProps:a},d))}),Je=l.forwardRef(function(e,r){var t=e.fieldProps,n=e.children;return l.createElement(He.Z,A({ref:r},t),n)}),Qe=(0,ee.Z)(Je,{valuePropName:"checked"}),oe=Qe;oe.Group=Ye;var Xe=oe,$=i(5966),O=i(21010),qe=i(36571);function _e(e,r){return V.apply(this,arguments)}function V(){return V=(0,B.Z)(C().mark(function e(r,t){return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,O.WY)("/api/login/captcha",(0,Z.Z)({method:"GET",params:(0,Z.Z)({},r)},t||{})));case 1:case"end":return a.stop()}},e)})),V.apply(this,arguments)}var et=i(34687),L=i.n(et),o=i(85893),le=function(r){var t=r.content;return(0,o.jsx)(ue.Z,{style:{marginBottom:24},message:t,type:"error",showIcon:!0})},tt=function(){var r=(0,l.useState)({}),t=(0,Y.Z)(r,2),n=t[0],a=t[1],s=(0,l.useState)("account"),d=(0,Y.Z)(s,2),g=d[0],p=d[1],F=(0,O.tT)("@@initialState"),w=F.initialState,T=F.setInitialState,c=(0,O.YB)(),S=function(){var j=(0,B.Z)(C().mark(function m(){var v,h;return C().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,w==null||(v=w.fetchUserInfo)===null||v===void 0?void 0:v.call(w);case 2:if(h=f.sent,!h){f.next=6;break}return f.next=6,T(function(y){return(0,Z.Z)((0,Z.Z)({},y),{},{currentUser:h})});case 6:case"end":return f.stop()}},m)}));return function(){return j.apply(this,arguments)}}(),R=function(){var j=(0,B.Z)(C().mark(function m(v){var h,P,f,y,x,M;return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,(0,qe.x4)((0,Z.Z)((0,Z.Z)({},v),{},{type:g}));case 3:if(h=u.sent,h.status!=="ok"){u.next=15;break}return P=c.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),H.default.success(P),u.next=9,S();case 9:if(O.m8){u.next=11;break}return u.abrupt("return");case 11:return f=O.m8.location.query,y=f,x=y.redirect,O.m8.push(x||"/"),u.abrupt("return");case 15:console.log(h),a(h),u.next=23;break;case 19:u.prev=19,u.t0=u.catch(0),M=c.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),H.default.error(M);case 23:case"end":return u.stop()}},m,null,[[0,19]])}));return function(v){return j.apply(this,arguments)}}(),I=n.status,E=n.type;return(0,o.jsx)("div",{className:L().container,children:(0,o.jsx)("div",{className:L().content,children:(0,o.jsxs)(Me,{logo:(0,o.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Ant Design",subTitle:c.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},onFinish:function(){var j=(0,B.Z)(C().mark(function m(v){return C().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,R(v);case 2:case"end":return P.stop()}},m)}));return function(m){return j.apply(this,arguments)}}(),children:[(0,o.jsxs)(z.Z,{activeKey:g,onChange:p,children:[(0,o.jsx)(z.Z.TabPane,{tab:c.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,o.jsx)(z.Z.TabPane,{tab:c.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),I==="error"&&E==="account"&&(0,o.jsx)(le,{content:c.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/123456)"})}),g==="account"&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($.Z,{name:"username",fieldProps:{size:"large",prefix:(0,o.jsx)(ve.Z,{className:L().prefixIcon})},placeholder:c.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,o.jsx)(O._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,o.jsx)($.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,o.jsx)(X,{className:L().prefixIcon})},placeholder:c.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: 123456"}),rules:[{required:!0,message:(0,o.jsx)(O._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),I==="error"&&E==="mobile"&&(0,o.jsx)(le,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),g==="mobile"&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)($.Z,{fieldProps:{size:"large",prefix:(0,o.jsx)(me,{className:L().prefixIcon})},name:"mobile",placeholder:c.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,o.jsx)(O._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,o.jsx)(O._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,o.jsx)(ze,{fieldProps:{size:"large",prefix:(0,o.jsx)(X,{className:L().prefixIcon})},captchaProps:{size:"large"},placeholder:c.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(m,v){return m?"".concat(v," ").concat(c.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):c.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,o.jsx)(O._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var j=(0,B.Z)(C().mark(function m(v){var h;return C().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log(v,111111),f.next=3,_e({phone:v});case 3:if(h=f.sent,console.log(h),h!==!1){f.next=7;break}return f.abrupt("return");case 7:H.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 8:case"end":return f.stop()}},m)}));return function(m){return j.apply(this,arguments)}}()})]}),(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsx)(Xe,{noStyle:!0,name:"autoLogin",children:(0,o.jsx)(O._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,o.jsx)("a",{style:{float:"right"},children:(0,o.jsx)(O._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})})})},rt=tt}}]);
